(()=>{"use strict";const e=(()=>{document.querySelectorAll(".game-panel");const e=document.querySelectorAll(".gameboard");return{createBoards:function(n){e.forEach((e=>{const s=t.buildBoard(n);e.appendChild(s),e.addEventListener("mouseover",(e=>{const t=e.target;t.classList.contains("board-cell")&&console.log(t)}),!0)}))}}})(),t={buildBoard:function(e){const t=document.createElement("div");t.classList.add("board-grid");for(let n=0;n<e;n++){const n=document.createElement("div");n.classList.add("board-row");for(let t=0;t<e;t++){const e=document.createElement("div");e.classList.add("board-cell"),n.appendChild(e)}t.appendChild(n)}return t}},n=e,s=()=>{const e={isChecked:!1,ship:null,shipIndex:null,assignShip(t,n){e.ship=t,e.shipIndex=n},hasShip:()=>null!==e.ship};return e},o=e=>{const t=function(e){let t=Array(e);for(let n=0;n<e;n++){t[n]=Array(e);for(let o=0;o<e;o++)t[n][o]=s()}return t}(e);function n(e){return o.board[e.y][e.x]}const o={board:t,ships:[],missed:[],setShip(e,t,s){const r=((e,t,n)=>{const s={length:e,cells:Array(e).fill(!0),pos:t,orie:n,hit(e){s.cells[e]=!1},isSunk:()=>s.cells.every((e=>0==e))};return s})(e,t,s);o.ships.push(r),function(e){const t=e.length,s=e.pos,o=e.orie;for(let r=0;r<t;r++)"horizontal"===o&&n({x:s.x+r,y:s.y}).assignShip(e,r),"vertical"===o&&n({x:s.x,y:s.y+r}).assignShip(e,r)}(r)},recieveAttack(e){const t=n({x:e.x,y:e.y});if(t.hasShip()){const e=t.ship,n=t.shipIndex;e.hit(n),e.isSunk()&&o.ships.map((e=>e.isSunk())).every((e=>!0===e))}else o.missed.push(e);t.isChecked=!0},wasCellChecked:e=>!0===n(e).isChecked};return o},r=(e,t=!1)=>{function n(e,t){return!e.gameboard.wasCellChecked(t)&&(e.gameboard.recieveAttack(t),!0)}const s={name:e,isAI:t,gameboard:o(10),attackOpponent:n};return t&&(s.attackRandomCell=function(e){const t=e.gameboard.board.length;let s=!1;for(;!s;)s=n(e,{x:Math.floor(Math.random()*t),y:Math.floor(Math.random()*t)})}),s};!function(){r("One"),r("CPU",!0);n.createBoards(10)}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WixNQUFNYyxFQUFPZixFQUFRLENBQ25CRyxFQUFHRixFQUFJRSxFQUNQRCxFQUFHRCxFQUFJQyxJQUVULEdBQUlhLEVBQUtyQixVQUFXLENBQ2xCLE1BQU1KLEVBQU95QixFQUFLekIsS0FDWkMsRUFBWXdCLEVBQUt4QixVQUN2QkQsRUFBS3FCLElBQUlwQixHQUVMRCxFQUFLdUIsVUEvQk56QixFQUFLZ0IsTUFBTWlCLEtBQUkvQixHQUNiQSxFQUFLdUIsV0FDWEMsT0FBTVEsSUFDYyxJQUFkQSxTQW9DTGxDLEVBQUtpQixPQUFPVyxLQUFLZixHQUVuQmMsRUFBSzFCLFdBQVksR0FFbkJrQyxlQUFldEIsSUFDcUIsSUFBM0JELEVBQVFDLEdBQUtaLFdBSXhCLE9BQU9ELEdFakVULEVBeENlLENBQUNvQyxFQUFNQyxHQUFLLEtBa0J6QixTQUFTQyxFQUFlQyxFQUFVMUIsR0FDaEMsT0FBSTBCLEVBQVMzRCxVQUFVdUQsZUFBZXRCLEtBQ3BDMEIsRUFBUzNELFVBQVVvRCxjQUFjbkIsSUFDMUIsR0FLWCxNQUFNYixFQUFPLENBQ1hvQyxLQUFBQSxFQUNBQyxLQUFBQSxFQUNBekQsVUE1QmdCLEVBSEUsSUFnQ2xCMEQsZUFBQUEsR0FPRixPQUpJRCxJQUNGckMsRUFBS3dDLGlCQS9CUCxTQUEwQkQsR0FDeEIsTUFBTXBCLEVBQVNvQixFQUFTM0QsVUFBVTJCLE1BQU1ZLE9BRXhDLElBQUlzQixHQUFnQixFQUNwQixNQUFPQSxHQUtMQSxFQUFnQkgsRUFBZUMsRUFEbkIsQ0FBQ3hCLEVBSEgyQixLQUFLQyxNQUFNRCxLQUFLRSxTQUFXekIsR0FHckJMLEVBRk40QixLQUFLQyxNQUFNRCxLQUFLRSxTQUFXekIsT0E0QmxDbkIsSUNuQ1QsV0FDaUIsRUFBTyxPQUNILEVBQU8sT0FBTyxHQUlqQyxlQVRlLElBd0JqQjZDLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2Rpc3BsYXlDb250cm9sbGVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZU9iamVjdHMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZU9iamVjdHMvc2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVPYmplY3RzL3BsYXllci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRpc3BsYXlDb250cm9sbGVyID0gKCgpID0+IHtcbiAgY29uc3QgZ2FtZVBhbmVscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYW1lLXBhbmVsJyk7XG4gIGNvbnN0IGdhbWVib2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FtZWJvYXJkJyk7XG5cbiAgZnVuY3Rpb24gY3JlYXRlQm9hcmRzKHNpemUpIHtcbiAgICBnYW1lYm9hcmRzLmZvckVhY2goZ2FtZWJvYXJkID0+IHtcbiAgICAgIGNvbnN0IGdyaWQgPSBlbGVtZW50QnVpbGRlci5idWlsZEJvYXJkKHNpemUpO1xuICAgICAgZ2FtZWJvYXJkLmFwcGVuZENoaWxkKGdyaWQpO1xuXG4gICAgICBnYW1lYm9hcmQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKGV2dCkgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldnQudGFyZ2V0O1xuICAgICAgICBpZih0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdib2FyZC1jZWxsJykpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyh0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9LCB0cnVlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHJldHMgPSB7XG4gICAgY3JlYXRlQm9hcmRzXG4gIH07XG5cbiAgcmV0dXJuIHJldHM7XG59KSgpO1xuXG5jb25zdCBlbGVtZW50QnVpbGRlciA9ICgoKSA9PiB7XG4gIGZ1bmN0aW9uIGJ1aWxkQm9hcmQoc2l6ZSkge1xuICAgIGNvbnN0IGJvYXJkR3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJvYXJkR3JpZC5jbGFzc0xpc3QuYWRkKCdib2FyZC1ncmlkJyk7XG5cbiAgICBmb3IgKGxldCByb3dJbmQgPSAwOyByb3dJbmQgPCBzaXplOyByb3dJbmQrKykge1xuICAgICAgY29uc3QgYm9hcmRSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGJvYXJkUm93LmNsYXNzTGlzdC5hZGQoJ2JvYXJkLXJvdycpO1xuXG4gICAgICBmb3IgKGxldCBjZWxsSW5kID0gMDsgY2VsbEluZCA8IHNpemU7IGNlbGxJbmQrKykge1xuICAgICAgICBjb25zdCBib2FyZENlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgYm9hcmRDZWxsLmNsYXNzTGlzdC5hZGQoJ2JvYXJkLWNlbGwnKTtcblxuICAgICAgICBib2FyZFJvdy5hcHBlbmRDaGlsZChib2FyZENlbGwpO1xuICAgICAgfVxuICAgICAgYm9hcmRHcmlkLmFwcGVuZENoaWxkKGJvYXJkUm93KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYm9hcmRHcmlkO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBidWlsZEJvYXJkXG4gIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBkaXNwbGF5Q29udHJvbGxlcjsiLCJpbXBvcnQgU2hpcCBmcm9tICcuL3NoaXAuanMnXG5cbmNvbnN0IENlbGwgPSAoKSA9PiB7XG4gIGNvbnN0IHJldHMgPSB7XG4gICAgaXNDaGVja2VkOiBmYWxzZSxcblxuICAgIHNoaXA6IG51bGwsXG4gICAgc2hpcEluZGV4OiBudWxsLFxuICAgIGFzc2lnblNoaXAoc2hpcCwgaW5kZXgpIHtcbiAgICAgIHJldHMuc2hpcCA9IHNoaXA7XG4gICAgICByZXRzLnNoaXBJbmRleCA9IGluZGV4O1xuICAgIH0sXG4gICAgaGFzU2hpcCgpIHtcbiAgICAgIHJldHVybiByZXRzLnNoaXAgIT09IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiByZXRzO1xufTtcblxuY29uc3QgR2FtZWJvYXJkID0gKHNpemUpID0+IHtcbiAgY29uc3QgYm9hcmQgPSBjcmVhdGVCb2FyZEdyaWQoc2l6ZSk7XG4gIGNvbnN0IHNoaXBzID0gW107XG4gIGNvbnN0IG1pc3NlZCA9IFtdO1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUJvYXJkR3JpZChzaXplKSB7XG4gICAgbGV0IGdyaWQgPSBBcnJheShzaXplKTtcbiAgICBmb3IgKGxldCByID0gMDsgciA8IHNpemU7IHIrKykge1xuICAgICAgZ3JpZFtyXSA9IEFycmF5KHNpemUpO1xuICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBzaXplOyBjKyspIHtcbiAgICAgICAgZ3JpZFtyXVtjXSA9IENlbGwoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZ3JpZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFzc2lnblNoaXBDZWxscyhzaGlwKSB7XG4gICAgY29uc3QgbGVuZ3RoID0gc2hpcC5sZW5ndGg7XG4gICAgY29uc3Qgc3RhcnRQb3MgPSBzaGlwLnBvcztcbiAgICBjb25zdCBvcmllID0gc2hpcC5vcmllO1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAob3JpZSA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBnZXRDZWxsKHtcbiAgICAgICAgICB4OiBzdGFydFBvcy54ICsgaSxcbiAgICAgICAgICB5OiBzdGFydFBvcy55XG4gICAgICAgIH0pO1xuICAgICAgICBjZWxsLmFzc2lnblNoaXAoc2hpcCwgaSk7XG4gICAgICB9XG4gICAgICBpZiAob3JpZSA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICBjb25zdCBjZWxsID0gZ2V0Q2VsbCh7XG4gICAgICAgICAgeDogc3RhcnRQb3MueCxcbiAgICAgICAgICB5OiBzdGFydFBvcy55ICsgaVxuICAgICAgICB9KTtcbiAgICAgICAgY2VsbC5hc3NpZ25TaGlwKHNoaXAsIGkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFyZUFsbFNoaXBzU3VuaygpIHtcbiAgICByZXR1cm4gcmV0cy5zaGlwcy5tYXAoc2hpcCA9PiB7XG4gICAgICByZXR1cm4gc2hpcC5pc1N1bmsoKTtcbiAgICB9KS5ldmVyeShib29sVmFsdWUgPT4ge1xuICAgICAgcmV0dXJuIGJvb2xWYWx1ZSA9PT0gdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q2VsbChwb3MpIHtcbiAgICByZXR1cm4gcmV0cy5ib2FyZFtwb3MueV1bcG9zLnhdO1xuICB9XG5cbiAgY29uc3QgcmV0cyA9IHtcbiAgICBib2FyZCxcbiAgICBzaGlwcyxcbiAgICBtaXNzZWQsXG5cbiAgICBzZXRTaGlwKGxlbmd0aCwgcG9zLCBvcmllKSB7XG4gICAgICBjb25zdCBzaGlwID0gU2hpcChsZW5ndGgsIHBvcywgb3JpZSk7XG4gICAgICByZXRzLnNoaXBzLnB1c2goc2hpcCk7XG4gICAgICBhc3NpZ25TaGlwQ2VsbHMoc2hpcCk7XG4gICAgfSxcbiAgICByZWNpZXZlQXR0YWNrKHBvcykge1xuICAgICAgY29uc3QgY2VsbCA9IGdldENlbGwoe1xuICAgICAgICB4OiBwb3MueCxcbiAgICAgICAgeTogcG9zLnlcbiAgICAgIH0pO1xuICAgICAgaWYgKGNlbGwuaGFzU2hpcCgpKSB7XG4gICAgICAgIGNvbnN0IHNoaXAgPSBjZWxsLnNoaXA7XG4gICAgICAgIGNvbnN0IHNoaXBJbmRleCA9IGNlbGwuc2hpcEluZGV4O1xuICAgICAgICBzaGlwLmhpdChzaGlwSW5kZXgpO1xuXG4gICAgICAgIGlmIChzaGlwLmlzU3VuaygpKSB7XG4gICAgICAgICAgLy8gU2hpcCBzdW5rZW4gY29kZSBoZXJlXG5cbiAgICAgICAgICBpZiAoYXJlQWxsU2hpcHNTdW5rKCkpIHtcbiAgICAgICAgICAgIC8vIEdhbWVvdmVyIGNvZGUvZnVuY3Rpb24gY2FsbCBoZXJlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXRzLm1pc3NlZC5wdXNoKHBvcyk7XG4gICAgICB9XG4gICAgICBjZWxsLmlzQ2hlY2tlZCA9IHRydWU7XG4gICAgfSxcbiAgICB3YXNDZWxsQ2hlY2tlZChwb3MpIHtcbiAgICAgIHJldHVybiBnZXRDZWxsKHBvcykuaXNDaGVja2VkID09PSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gcmV0cztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdhbWVib2FyZDsiLCJjb25zdCBTaGlwID0gKGxlbmd0aCwgcG9zLCBvcmllKSA9PiB7XG4gIGNvbnN0IGNlbGxzID0gQXJyYXkobGVuZ3RoKS5maWxsKHRydWUpO1xuXG4gIGNvbnN0IHJldHMgPSB7XG4gICAgbGVuZ3RoLFxuICAgIGNlbGxzLFxuICAgIHBvcyxcbiAgICBvcmllLFxuICAgIGhpdChjZWxsSW5kZXgpIHtcbiAgICAgIHJldHMuY2VsbHNbY2VsbEluZGV4XSA9IGZhbHNlO1xuICAgIH0sXG4gICAgaXNTdW5rKCkge1xuICAgICAgcmV0dXJuIHJldHMuY2VsbHMuZXZlcnkoY2VsbCA9PiAoY2VsbCA9PSBmYWxzZSkpO1xuICAgIH0sXG4gIH07XG5cbiAgcmV0dXJuIHJldHM7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTaGlwOyIsImltcG9ydCBHYW1lYm9hcmQgZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5cbmNvbnN0IGdhbWVib2FyZFNpemUgPSAxMFxuXG5jb25zdCBQbGF5ZXIgPSAobmFtZSwgaXNBST1mYWxzZSkgPT4ge1xuICBjb25zdCBnYW1lYm9hcmQgPSBHYW1lYm9hcmQoZ2FtZWJvYXJkU2l6ZSk7XG5cbiAgZnVuY3Rpb24gYXR0YWNrUmFuZG9tQ2VsbChvcHBvbmVudCkge1xuICAgIGNvbnN0IGxlbmd0aCA9IG9wcG9uZW50LmdhbWVib2FyZC5ib2FyZC5sZW5ndGg7XG5cbiAgICBsZXQgYXR0YWNrU3VjY2VzcyA9IGZhbHNlO1xuICAgIHdoaWxlKCFhdHRhY2tTdWNjZXNzKSB7XG4gICAgICBjb25zdCB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbGVuZ3RoKTtcbiAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsZW5ndGgpO1xuXG4gICAgICBjb25zdCBwb3MgPSB7eCwgeX07XG4gICAgICBhdHRhY2tTdWNjZXNzID0gYXR0YWNrT3Bwb25lbnQob3Bwb25lbnQsIHBvcyk7XG4gICAgfVxuICB9XG5cbiAgLy8gUmV0dXJucyB0cnVlIGlmIHRhcmdldCBwb3NpdGlvbiBpcyBhIHZhbGlkIGNsZWxsXG4gIC8vIFJldHVybnMgZmFsc2Ugb3RoZXJ3aXNlXG4gIGZ1bmN0aW9uIGF0dGFja09wcG9uZW50KG9wcG9uZW50LCBwb3MpIHtcbiAgICBpZighb3Bwb25lbnQuZ2FtZWJvYXJkLndhc0NlbGxDaGVja2VkKHBvcykpIHtcbiAgICAgIG9wcG9uZW50LmdhbWVib2FyZC5yZWNpZXZlQXR0YWNrKHBvcyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgcmV0cyA9IHtcbiAgICBuYW1lLFxuICAgIGlzQUksXG4gICAgZ2FtZWJvYXJkLFxuICAgIGF0dGFja09wcG9uZW50XG4gIH07XG5cbiAgaWYgKGlzQUkpIHtcbiAgICByZXRzLmF0dGFja1JhbmRvbUNlbGwgPSBhdHRhY2tSYW5kb21DZWxsO1xuICB9XG5cbiAgcmV0dXJuIHJldHM7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQbGF5ZXI7IiwiaW1wb3J0IGRpc3BsYXkgZnJvbSBcIi4vZGlzcGxheUNvbnRyb2xsZXJcIjtcbmltcG9ydCBQbGF5ZXIgZnJvbSBcIi4vZ2FtZU9iamVjdHMvcGxheWVyXCI7XG5cbmNvbnN0IGdyaWRTaXplID0gMTA7XG5cblxuZnVuY3Rpb24gc3RhcnQoKSB7XG4gIGNvbnN0IHBsYXllciA9IFBsYXllcignT25lJylcbiAgY29uc3QgY29tcHV0ZXJBSSA9IFBsYXllcignQ1BVJywgdHJ1ZSlcblxuICBjb25zdCBwbGF5ZXJzID0gW3BsYXllciwgY29tcHV0ZXJBSV1cblxuICBkaXNwbGF5LmNyZWF0ZUJvYXJkcyhncmlkU2l6ZSk7XG5cbiAgZ2FtZShwbGF5ZXJzKVxufVxuXG5mdW5jdGlvbiBnYW1lKHBsYXllcnMpIHtcbiAgbGV0IHR1cm4gPSAwO1xuICBjb25zdCBwbGF5ZXJDb3VudCA9IHBsYXllcnMubGVuZ3RoO1xuXG4gIHdoaWxlKHRydWUpIHtcbiAgICBjb25zdCBjdXJyZW50UGxheWVyID0gcGxheWVyc1sodHVybiAlIHBsYXllckNvdW50KV07XG4gICAgYnJlYWs7XG4gIH1cbn1cblxuc3RhcnQoKTsiXSwibmFtZXMiOlsiZGlzcGxheUNvbnRyb2xsZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJnYW1lYm9hcmRzIiwiY3JlYXRlQm9hcmRzIiwic2l6ZSIsImZvckVhY2giLCJnYW1lYm9hcmQiLCJncmlkIiwiZWxlbWVudEJ1aWxkZXIiLCJidWlsZEJvYXJkIiwiYXBwZW5kQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJjb25zb2xlIiwibG9nIiwiYm9hcmRHcmlkIiwiY3JlYXRlRWxlbWVudCIsImFkZCIsInJvd0luZCIsImJvYXJkUm93IiwiY2VsbEluZCIsImJvYXJkQ2VsbCIsIkNlbGwiLCJyZXRzIiwiaXNDaGVja2VkIiwic2hpcCIsInNoaXBJbmRleCIsImFzc2lnblNoaXAiLCJpbmRleCIsImhhc1NoaXAiLCJib2FyZCIsIkFycmF5IiwiciIsImMiLCJjcmVhdGVCb2FyZEdyaWQiLCJnZXRDZWxsIiwicG9zIiwieSIsIngiLCJzaGlwcyIsIm1pc3NlZCIsInNldFNoaXAiLCJsZW5ndGgiLCJvcmllIiwiY2VsbHMiLCJmaWxsIiwiaGl0IiwiY2VsbEluZGV4IiwiaXNTdW5rIiwiZXZlcnkiLCJjZWxsIiwicHVzaCIsInN0YXJ0UG9zIiwiaSIsImFzc2lnblNoaXBDZWxscyIsInJlY2lldmVBdHRhY2siLCJtYXAiLCJib29sVmFsdWUiLCJ3YXNDZWxsQ2hlY2tlZCIsIm5hbWUiLCJpc0FJIiwiYXR0YWNrT3Bwb25lbnQiLCJvcHBvbmVudCIsImF0dGFja1JhbmRvbUNlbGwiLCJhdHRhY2tTdWNjZXNzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic3RhcnQiXSwic291cmNlUm9vdCI6IiJ9