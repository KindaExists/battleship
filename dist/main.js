(()=>{"use strict";const e=function(e){const t=document.createElement("div");t.classList.add("board-grid");for(let n of e.board)for(let e of n){const n=document.createElement("div");n.classList.add("board-cell"),e.hasShip()&&e.isChecked?n.classList.add("dead-ship-cell"):e.hasShip()?n.classList.add("live-ship-cell"):e.isChecked&&n.classList.add("cell-checked"),t.appendChild(n)}return t},t=function(e){const t=document.createElement("div");t.classList.add("board-grid");for(let n of e.board)for(let e of n){const n=document.createElement("div");n.classList.add("board-cell"),e.hasShip()&&e.isChecked?n.classList.add("dead-ship-cell"):e.isChecked&&n.classList.add("cell-checked"),t.appendChild(n)}return t},n=(()=>{const n=document.querySelector("#output_text");function a(e){e.textContent=""}return{renderPlayerGameboard:function(t){const n=document.querySelector("#player .gameboard");a(n);const o=e(t);n.appendChild(o)},renderOpponentGameboard:function(e){const n=document.querySelector("#opponent .gameboard");a(n);const o=t(e);n.appendChild(o)},editOutputText:function(e){n.textContent=e}}})(),a=(()=>{let e=document.querySelector("#player .gameboard"),t=document.querySelector("#opponent .gameboard");const n=document.querySelector("#rotate_button");let a="horizontal",o=[5,4,3,3,2];function r(){c(e),c(t),e=document.querySelector("#player .gameboard"),t=document.querySelector("#opponent .gameboard")}function c(e){const t=e,n=t.cloneNode(!0);t.parentNode.replaceChild(n,t)}function i(e,t,n){const r=e.target;if(r.classList.contains("board-cell")){const e=o[0],c=t.gameboard.sideLength,i=r.parentNode.children,s=Array.from(i).indexOf(r);let d=[];for(let t=0;t<e;t++)if("horizontal"===a){const e=s+t;if(d.push(i[e]),e%c+1>=c)break}else{const e=s+t*c;if(d.push(i[e]),Math.floor(e/c)+1>=c)break}d.forEach((e=>{n?e.classList.add("highlighted"):e.classList.remove("highlighted")}))}}function d(e,t){const n=t.sideLength,a=e.parentNode.children,o=Array.from(a).indexOf(e);return{x:o%n,y:Math.floor(o/n)}}function l(e,t){const n=e.target;n.classList.contains("board-cell")&&(t?n.classList.add("highlighted"):n.classList.remove("highlighted"))}function h(){a="horizontal"===a?"vertical":"horizontal"}const u={attachAddShipEvents:function(t,c){e.addEventListener("mouseenter",(e=>i(e,t,!0)),!0),e.addEventListener("mouseleave",(e=>i(e,t,!1)),!0),e.addEventListener("click",(e=>function(e,t,n){const c=e.target;if(c.classList.contains("board-cell")){const e=t.gameboard,i=d(c,e);e.setShip(o[0],i,a)&&(s.completePlacementTurn(t,n,o[0]),o.shift(),o.length<=0&&(r(),s.beginAttackPhase(t,n)))}}(e,t,c)),!0),n.addEventListener("click",h)},attachAttackEvents:function(e,n){t.addEventListener("mouseenter",(e=>l(e,!0)),!0),t.addEventListener("mouseleave",(e=>l(e,!1)),!0),t.addEventListener("click",(t=>function(e,t,n){const a=e.target;if(a.classList.contains("board-cell")){const e=d(a,n.gameboard);t.attackOpponent(n,e)&&(s.completeGameTurn(t,n),function(e,t){e.isWinner?s.declareWinner(e):t.isWinner&&s.declareWinner(t)}(t,n))}}(t,e,n)),!0)},clearGridEvents:r};return u})(),o=a,r=()=>{const e={isChecked:!1,ship:null,shipIndex:null,assignShip(t,n){e.ship=t,e.shipIndex=n},hasShip:()=>null!==e.ship};return e},c=e=>{const t=e,a=function(e){let t=Array(e);for(let n=0;n<e;n++){t[n]=Array(e);for(let a=0;a<e;a++)t[n][a]=r()}return t}(e);function o(){return i.ships.map((e=>e.isSunk())).every((e=>!0===e))}function c(e){return i.board[e.y][e.x]}const i={sideLength:t,board:a,ships:[],missed:[],getCell:c,setShip:function(e,n,a){const o=((e,t,n)=>{const a={length:e,cells:Array(e).fill(!0),pos:t,orie:n,hit:function(e){a.cells[e]=!1},isSunk:function(){return a.cells.every((e=>0==e))}};return a})(e,n,a),r=function(e){const n=e.length,a=e.pos,o=e.orie;let r=[];for(let e=0;e<n;e++){let n;"horizontal"===o?a.x+e<t&&(n=c({x:a.x+e,y:a.y})):"vertical"===o&&a.y+e<t&&(n=c({x:a.x,y:a.y+e})),r.push([n,e])}return!!r.every((e=>void 0!==e[0]&&!e[0].hasShip()))&&(r.forEach((t=>{t[0].assignShip(e,t[1])})),!0)}(o);return r&&i.ships.push(o),r},areAllShipsSunk:o,placeShipRandomly:function(e){for(;;){const n=Math.floor(2*Math.random())?"horizontal":"vertical",a=Math.floor(Math.random()*t),o=Math.floor(Math.random()*t);if(i.setShip(e,{x:a,y:o},n))break}},recieveAttack:function(e){const t=c({x:e.x,y:e.y});if(t.hasShip()){const e=t.ship,a=t.shipIndex;e.hit(a),e.isSunk()&&n.editOutputText(`${e.length}-Cell Long Ship Sunk`)}else i.missed.push(e);return t.isChecked=!0,o()},wasCellChecked:function(e){return!0===c(e).isChecked}};return i},i=(e,t=!1)=>{function n(e,t){return!e.gameboard.wasCellChecked(t)&&(e.gameboard.recieveAttack(t)&&(a.isWinner=!0),!0)}const a={name:e,isAI:t,gameboard:c(10),attackOpponent:n,isWinner:!1};return t&&(a.attackRandomCell=function(e){const t=e.gameboard.board.length;let a=!1;for(;!a;)a=n(e,{x:Math.floor(Math.random()*t),y:Math.floor(Math.random()*t)})}),a},s={setupGame:function(){const e=i("User"),t=i("Computer",!0);n.renderPlayerGameboard(e.gameboard),n.renderOpponentGameboard(t.gameboard),function(e,t){o.attachAddShipEvents(e,t)}(e,t)},beginAttackPhase:function(e,t){o.attachAttackEvents(e,t)},completePlacementTurn:function(e,t,a){t.gameboard.placeShipRandomly(a),n.renderPlayerGameboard(e.gameboard),n.renderOpponentGameboard(t.gameboard)},completeGameTurn:function(e,t){t.attackRandomCell(e),n.renderPlayerGameboard(e.gameboard),n.renderOpponentGameboard(t.gameboard)},declareWinner:function(e){o.clearGridEvents(),n.editOutputText(`All ships sunk, ${e.name} wins!`)}};s.setupGame()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3NFLEVBQVN0RSxZQVluRDRILGlCQXJCRixTQUEwQnJGLEVBQVErQixHQUNoQ0EsRUFBUytDLGlCQUFpQjlFLEdBQzFCLHdCQUF3Q0EsRUFBT3ZDLFdBQy9DLDBCQUEwQ3NFLEVBQVN0RSxZQW1CbkQ2SCxjQVZGLFNBQXVCQyxHQUNyQixvQkFDQSxpQkFBaUMsbUJBQW1CQSxFQUFjWCxnQkNuQ3RFLGUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2VsZW1lbnRCdWlsZGVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZGlzcGxheUNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lRXZlbnRzLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZU9iamVjdHMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZU9iamVjdHMvc2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVPYmplY3RzL3BsYXllci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVDb250cm9sbGVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZWxlbWVudEJ1aWxkZXIgPSAoKCkgPT4ge1xuICBmdW5jdGlvbiBidWlsZFBsYXllckdyaWQoZ2FtZWJvYXJkKSB7XG4gICAgY29uc3QgYm9hcmRHcmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYm9hcmRHcmlkLmNsYXNzTGlzdC5hZGQoJ2JvYXJkLWdyaWQnKTtcblxuICAgIGZvciAobGV0IHJvdyBvZiBnYW1lYm9hcmQuYm9hcmQpIHtcbiAgICAgIGZvciAobGV0IGNlbGwgb2Ygcm93KSB7XG4gICAgICAgIGNvbnN0IGJvYXJkQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBib2FyZENlbGwuY2xhc3NMaXN0LmFkZCgnYm9hcmQtY2VsbCcpO1xuXG4gICAgICAgIGlmIChjZWxsLmhhc1NoaXAoKSAmJiBjZWxsLmlzQ2hlY2tlZCkge1xuICAgICAgICAgIGJvYXJkQ2VsbC5jbGFzc0xpc3QuYWRkKCdkZWFkLXNoaXAtY2VsbCcpO1xuICAgICAgICB9IGVsc2UgaWYgKGNlbGwuaGFzU2hpcCgpKSB7XG4gICAgICAgICAgYm9hcmRDZWxsLmNsYXNzTGlzdC5hZGQoJ2xpdmUtc2hpcC1jZWxsJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2VsbC5pc0NoZWNrZWQpIHtcbiAgICAgICAgICBib2FyZENlbGwuY2xhc3NMaXN0LmFkZCgnY2VsbC1jaGVja2VkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBib2FyZEdyaWQuYXBwZW5kQ2hpbGQoYm9hcmRDZWxsKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYm9hcmRHcmlkO1xuICB9XG5cbiAgZnVuY3Rpb24gYnVpbGRPcHBvbmVudEdyaWQoZ2FtZWJvYXJkKSB7XG4gICAgY29uc3QgYm9hcmRHcmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYm9hcmRHcmlkLmNsYXNzTGlzdC5hZGQoJ2JvYXJkLWdyaWQnKTtcblxuICAgIGZvciAobGV0IHJvdyBvZiBnYW1lYm9hcmQuYm9hcmQpIHtcbiAgICAgIGZvciAobGV0IGNlbGwgb2Ygcm93KSB7XG4gICAgICAgIGNvbnN0IGJvYXJkQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBib2FyZENlbGwuY2xhc3NMaXN0LmFkZCgnYm9hcmQtY2VsbCcpO1xuXG4gICAgICAgIGlmIChjZWxsLmhhc1NoaXAoKSAmJiBjZWxsLmlzQ2hlY2tlZCkge1xuICAgICAgICAgIGJvYXJkQ2VsbC5jbGFzc0xpc3QuYWRkKCdkZWFkLXNoaXAtY2VsbCcpO1xuICAgICAgICB9IGVsc2UgaWYgKGNlbGwuaXNDaGVja2VkKSB7XG4gICAgICAgICAgYm9hcmRDZWxsLmNsYXNzTGlzdC5hZGQoJ2NlbGwtY2hlY2tlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgYm9hcmRHcmlkLmFwcGVuZENoaWxkKGJvYXJkQ2VsbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGJvYXJkR3JpZDtcbiAgfVxuXG4gIGNvbnN0IHJldHMgPSB7XG4gICAgYnVpbGRQbGF5ZXJHcmlkLFxuICAgIGJ1aWxkT3Bwb25lbnRHcmlkLFxuICB9O1xuXG4gIHJldHVybiByZXRzO1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgZWxlbWVudEJ1aWxkZXI7IiwiaW1wb3J0IGVsZW1lbnRCdWlsZGVyIGZyb20gXCIuL2VsZW1lbnRCdWlsZGVyXCI7XG5cbmNvbnN0IGRpc3BsYXlDb250cm9sbGVyID0gKCgpID0+IHtcbiAgY29uc3Qgb3V0cHV0VGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvdXRwdXRfdGV4dCcpXG5cbiAgZnVuY3Rpb24gX2NsZWFyRGlzcGxheUdyaWQoZ3JpZCkge1xuICAgIGdyaWQudGV4dENvbnRlbnQgPSAnJztcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlclBsYXllckdhbWVib2FyZChnYW1lYm9hcmQpIHtcbiAgICAvLyBHcmlkIHF1ZXJpZXMgYXJlIGluc2lkZSBmdW5jdGlvbnMgYXMgZWxlbWVudCBjbG9uaW5nIGJyZWFrcyB0aGUgcXVlcnlcbiAgICBjb25zdCBwbGF5ZXJEaXNwbGF5R3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGF5ZXIgLmdhbWVib2FyZCcpO1xuICAgIF9jbGVhckRpc3BsYXlHcmlkKHBsYXllckRpc3BsYXlHcmlkKTtcbiAgICBjb25zdCBkaXNwbGF5R3JpZCA9IGVsZW1lbnRCdWlsZGVyLmJ1aWxkUGxheWVyR3JpZChnYW1lYm9hcmQpO1xuICAgIHBsYXllckRpc3BsYXlHcmlkLmFwcGVuZENoaWxkKGRpc3BsYXlHcmlkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck9wcG9uZW50R2FtZWJvYXJkKGdhbWVib2FyZCkge1xuICAgIGNvbnN0IG9wcG9uZW50RGlzcGxheUdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3Bwb25lbnQgLmdhbWVib2FyZCcpO1xuICAgIF9jbGVhckRpc3BsYXlHcmlkKG9wcG9uZW50RGlzcGxheUdyaWQpO1xuICAgIGNvbnN0IGRpc3BsYXlHcmlkID0gZWxlbWVudEJ1aWxkZXIuYnVpbGRPcHBvbmVudEdyaWQoZ2FtZWJvYXJkKTtcbiAgICBvcHBvbmVudERpc3BsYXlHcmlkLmFwcGVuZENoaWxkKGRpc3BsYXlHcmlkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVkaXRPdXRwdXRUZXh0KG5ld1RleHQpIHtcbiAgICBvdXRwdXRUZXh0LnRleHRDb250ZW50ID0gbmV3VGV4dDtcbiAgfVxuXG4gIGNvbnN0IHJldHMgPSB7XG4gICAgcmVuZGVyUGxheWVyR2FtZWJvYXJkLFxuICAgIHJlbmRlck9wcG9uZW50R2FtZWJvYXJkLFxuICAgIGVkaXRPdXRwdXRUZXh0XG4gIH07XG5cbiAgcmV0dXJuIHJldHM7XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBkaXNwbGF5Q29udHJvbGxlcjsiLCJpbXBvcnQgZGlzcGxheUNvbnRyb2xsZXIgZnJvbSBcIi4vZGlzcGxheUNvbnRyb2xsZXJcIjtcbmltcG9ydCBnYW1lQ29udHJvbGxlciBmcm9tIFwiLi9nYW1lQ29udHJvbGxlclwiO1xuXG5jb25zdCBnYW1lRXZlbnRzID0gKCgpID0+IHtcbiAgbGV0IHBsYXllckRpc3BsYXlHcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYXllciAuZ2FtZWJvYXJkJyk7XG4gIGxldCBvcHBvbmVudERpc3BsYXlHcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wcG9uZW50IC5nYW1lYm9hcmQnKTtcbiAgY29uc3Qgcm90YXRlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JvdGF0ZV9idXR0b24nKTtcblxuICBsZXQgb3JpZSA9ICdob3Jpem9udGFsJztcbiAgbGV0IHNoaXBMZW5ndGhzID0gWzUsIDQsIDMsIDMsIDJdXG5cbiAgZnVuY3Rpb24gYXR0YWNoQWRkU2hpcEV2ZW50cyhodW1hblBsYXllciwgb3Bwb25lbnRQbGF5ZXIpIHtcbiAgICBwbGF5ZXJEaXNwbGF5R3JpZC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKGUpID0+IF9zZXRTaGlwSGlnaGxpZ2h0KGUsIGh1bWFuUGxheWVyLCB0cnVlKSwgdHJ1ZSk7XG4gICAgcGxheWVyRGlzcGxheUdyaWQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIChlKSA9PiBfc2V0U2hpcEhpZ2hsaWdodChlLCBodW1hblBsYXllciwgZmFsc2UpLCB0cnVlKTtcbiAgICBwbGF5ZXJEaXNwbGF5R3JpZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBfYWRkU2hpcFRvR3JpZChlLCBodW1hblBsYXllciwgb3Bwb25lbnRQbGF5ZXIpLCB0cnVlKTtcblxuICAgIHJvdGF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9yb3RhdGVOZXh0U2hpcCk7XG4gIH1cblxuICBmdW5jdGlvbiBhdHRhY2hBdHRhY2tFdmVudHMoaHVtYW5QbGF5ZXIsIG9wcG9uZW50UGxheWVyKSB7XG4gICAgb3Bwb25lbnREaXNwbGF5R3JpZC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKGUpID0+IF9zZXRBdHRhY2tIaWdobGlnaHQoZSwgdHJ1ZSksIHRydWUpOztcbiAgICBvcHBvbmVudERpc3BsYXlHcmlkLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoZSkgPT4gX3NldEF0dGFja0hpZ2hsaWdodChlLCBmYWxzZSksIHRydWUpO1xuICAgIG9wcG9uZW50RGlzcGxheUdyaWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gX2F0dGFja09wcG9uZW50Q2VsbE9uR3JpZChlLCBodW1hblBsYXllciwgb3Bwb25lbnRQbGF5ZXIpLCB0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyR3JpZEV2ZW50cygpIHtcbiAgICBfY2xlYXJBbGxFbGVtZW50RXZlbnRzKHBsYXllckRpc3BsYXlHcmlkKTtcbiAgICBfY2xlYXJBbGxFbGVtZW50RXZlbnRzKG9wcG9uZW50RGlzcGxheUdyaWQpO1xuXG4gICAgcGxheWVyRGlzcGxheUdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxheWVyIC5nYW1lYm9hcmQnKTtcbiAgICBvcHBvbmVudERpc3BsYXlHcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wcG9uZW50IC5nYW1lYm9hcmQnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jbGVhckFsbEVsZW1lbnRFdmVudHMoZWxlbWVudCkge1xuICAgIGNvbnN0IG9sZEVsZW1lbnQgPSBlbGVtZW50O1xuICAgIGNvbnN0IGNsZWFyZWRFbGVtZW50ID0gb2xkRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgb2xkRWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbGVhcmVkRWxlbWVudCwgb2xkRWxlbWVudCk7XG4gIH1cblxuXG4gIGZ1bmN0aW9uIF9hZGRTaGlwVG9HcmlkKGUsIHBsYXllciwgb3Bwb25lbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYm9hcmQtY2VsbCcpKSB7XG4gICAgICBjb25zdCBwbGF5ZXJHYW1lYm9hcmQgPSBwbGF5ZXIuZ2FtZWJvYXJkO1xuICAgICAgY29uc3QgdGFyZ2V0UG9zID0gX2dldFRhcmdldFBvcyh0YXJnZXQsIHBsYXllckdhbWVib2FyZCk7XG5cbiAgICAgIGNvbnN0IGlzTGVnYWxQbGFjZW1lbnQgPSBwbGF5ZXJHYW1lYm9hcmQuc2V0U2hpcChzaGlwTGVuZ3Roc1swXSwgdGFyZ2V0UG9zLCBvcmllKTtcblxuICAgICAgaWYoaXNMZWdhbFBsYWNlbWVudCkge1xuICAgICAgICBnYW1lQ29udHJvbGxlci5jb21wbGV0ZVBsYWNlbWVudFR1cm4ocGxheWVyLCBvcHBvbmVudCwgc2hpcExlbmd0aHNbMF0pO1xuICAgICAgICBzaGlwTGVuZ3Rocy5zaGlmdCgpXG4gICAgICAgIGlmKHNoaXBMZW5ndGhzLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgY2xlYXJHcmlkRXZlbnRzKHBsYXllckRpc3BsYXlHcmlkKTtcbiAgICAgICAgICBnYW1lQ29udHJvbGxlci5iZWdpbkF0dGFja1BoYXNlKHBsYXllciwgb3Bwb25lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX3NldFNoaXBIaWdobGlnaHQoZSwgcGxheWVyLCBoaWdobGlnaHRlZCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuXG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2JvYXJkLWNlbGwnKSkge1xuICAgICAgY29uc3QgbGVuZ3RoID0gc2hpcExlbmd0aHNbMF07XG5cbiAgICAgIGNvbnN0IHBsYXllckdhbWVib2FyZCA9IHBsYXllci5nYW1lYm9hcmQ7XG5cbiAgICAgIGNvbnN0IHNpemUgPSBwbGF5ZXJHYW1lYm9hcmQuc2lkZUxlbmd0aDtcbiAgICAgIGNvbnN0IGdyaWRDZWxsTGlzdCA9IHRhcmdldC5wYXJlbnROb2RlLmNoaWxkcmVuO1xuICAgICAgY29uc3QgdGFyZ2V0SW5kZXggPSAgQXJyYXkuZnJvbShncmlkQ2VsbExpc3QpLmluZGV4T2YodGFyZ2V0KTtcblxuICAgICAgbGV0IHRvSGlnaGxpZ2h0Q2VsbHMgPSBbXTtcbiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpZihvcmllID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICBjb25zdCBncmlkQ2VsbEluZGV4ID0gdGFyZ2V0SW5kZXggKyBpO1xuICAgICAgICAgIHRvSGlnaGxpZ2h0Q2VsbHMucHVzaChncmlkQ2VsbExpc3RbZ3JpZENlbGxJbmRleF0pO1xuICAgICAgICAgIGlmICgoZ3JpZENlbGxJbmRleCAlIHNpemUpICsgMSA+PSBzaXplKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZ3JpZENlbGxJbmRleCA9IHRhcmdldEluZGV4ICsgKGkgKiBzaXplKTtcbiAgICAgICAgICB0b0hpZ2hsaWdodENlbGxzLnB1c2goZ3JpZENlbGxMaXN0W2dyaWRDZWxsSW5kZXhdKTtcbiAgICAgICAgICBpZiAoTWF0aC5mbG9vcihncmlkQ2VsbEluZGV4IC8gc2l6ZSkgKyAxID49IHNpemUpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0b0hpZ2hsaWdodENlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgaWYoaGlnaGxpZ2h0ZWQpIHtcbiAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodGVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHRlZCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfYXR0YWNrT3Bwb25lbnRDZWxsT25HcmlkKGUsIHBsYXllciwgb3Bwb25lbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcblxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdib2FyZC1jZWxsJykpIHtcbiAgICAgIGNvbnN0IHRhcmdldFBvcyA9IF9nZXRUYXJnZXRQb3ModGFyZ2V0LCBvcHBvbmVudC5nYW1lYm9hcmQpO1xuXG4gICAgICBjb25zdCBpc0xlZ2FsTW92ZSA9IHBsYXllci5hdHRhY2tPcHBvbmVudChvcHBvbmVudCwgdGFyZ2V0UG9zKTtcbiAgICAgIGlmIChpc0xlZ2FsTW92ZSkge1xuICAgICAgICBnYW1lQ29udHJvbGxlci5jb21wbGV0ZUdhbWVUdXJuKHBsYXllciwgb3Bwb25lbnQpO1xuICAgICAgICBfY2hlY2tGb3JXaW5uZXIocGxheWVyLCBvcHBvbmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2dldFRhcmdldFBvcyh0YXJnZXQsIGdhbWVib2FyZCkge1xuICAgIGNvbnN0IHNpemUgPSBnYW1lYm9hcmQuc2lkZUxlbmd0aDtcbiAgICBjb25zdCBncmlkQ2VsbExpc3QgPSB0YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlbjtcbiAgICBjb25zdCB0YXJnZXRJbmRleCA9ICBBcnJheS5mcm9tKGdyaWRDZWxsTGlzdCkuaW5kZXhPZih0YXJnZXQpO1xuXG4gICAgY29uc3QgdGFyZ2V0WCA9IHRhcmdldEluZGV4ICUgc2l6ZTtcbiAgICBjb25zdCB0YXJnZXRZID0gTWF0aC5mbG9vcih0YXJnZXRJbmRleCAvIHNpemUpO1xuXG4gICAgcmV0dXJuIHt4OnRhcmdldFgsIHk6dGFyZ2V0WX07XG4gIH1cblxuICBmdW5jdGlvbiBfY2hlY2tGb3JXaW5uZXIocGxheWVyLCBvcHBvbmVudCkge1xuICAgIGlmIChwbGF5ZXIuaXNXaW5uZXIpIHtcbiAgICAgIGdhbWVDb250cm9sbGVyLmRlY2xhcmVXaW5uZXIocGxheWVyKTtcbiAgICB9IGVsc2UgaWYgKG9wcG9uZW50LmlzV2lubmVyKSB7XG4gICAgICBnYW1lQ29udHJvbGxlci5kZWNsYXJlV2lubmVyKG9wcG9uZW50KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfc2V0QXR0YWNrSGlnaGxpZ2h0KGUsIGhpZ2hsaWdodGVkKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2JvYXJkLWNlbGwnKSkge1xuICAgICAgaWYgKGhpZ2hsaWdodGVkKSB7XG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHRlZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodGVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX3JvdGF0ZU5leHRTaGlwKCkge1xuICAgIGlmIChvcmllID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgIG9yaWUgPSAndmVydGljYWwnO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcmllID0gJ2hvcml6b250YWwnO1xuICAgIH1cbiAgfVxuXG5cbiAgY29uc3QgcmV0cyA9IHtcbiAgICBhdHRhY2hBZGRTaGlwRXZlbnRzLFxuICAgIGF0dGFjaEF0dGFja0V2ZW50cyxcbiAgICBjbGVhckdyaWRFdmVudHMsXG4gIH07XG5cbiAgcmV0dXJuIHJldHM7XG59KSgpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGdhbWVFdmVudHM7IiwiaW1wb3J0IGRpc3BsYXlDb250cm9sbGVyIGZyb20gXCIuLi9kaXNwbGF5Q29udHJvbGxlci5qc1wiO1xuaW1wb3J0IFNoaXAgZnJvbSBcIi4vc2hpcC5qc1wiO1xuLy8gaW1wb3J0IHsgZGV0ZXJtaW5lV2lubmVyIH0gZnJvbSBcIi4uL2luZGV4LmpzXCI7XG5cbmNvbnN0IENlbGwgPSAoKSA9PiB7XG4gIGNvbnN0IHJldHMgPSB7XG4gICAgaXNDaGVja2VkOiBmYWxzZSxcblxuICAgIHNoaXA6IG51bGwsXG4gICAgc2hpcEluZGV4OiBudWxsLFxuICAgIGFzc2lnblNoaXAoc2hpcCwgaW5kZXgpIHtcbiAgICAgIHJldHMuc2hpcCA9IHNoaXA7XG4gICAgICByZXRzLnNoaXBJbmRleCA9IGluZGV4O1xuICAgIH0sXG4gICAgaGFzU2hpcCgpIHtcbiAgICAgIHJldHVybiByZXRzLnNoaXAgIT09IG51bGw7XG4gICAgfSxcbiAgfTtcblxuICByZXR1cm4gcmV0cztcbn07XG5cbmNvbnN0IEdhbWVib2FyZCA9IChzaXplKSA9PiB7XG4gIGNvbnN0IHNpZGVMZW5ndGggPSBzaXplO1xuICBjb25zdCBib2FyZCA9IF9jcmVhdGVCb2FyZEdyaWQoc2l6ZSk7XG4gIGNvbnN0IHNoaXBzID0gW107XG4gIGNvbnN0IG1pc3NlZCA9IFtdO1xuXG4gIGZ1bmN0aW9uIF9jcmVhdGVCb2FyZEdyaWQoc2l6ZSkge1xuICAgIGxldCBncmlkID0gQXJyYXkoc2l6ZSk7XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBzaXplOyByKyspIHtcbiAgICAgIGdyaWRbcl0gPSBBcnJheShzaXplKTtcbiAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgc2l6ZTsgYysrKSB7XG4gICAgICAgIGdyaWRbcl1bY10gPSBDZWxsKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGdyaWQ7XG4gIH1cblxuICBmdW5jdGlvbiBfYXNzaWduU2hpcENlbGxzKHNoaXApIHtcbiAgICBjb25zdCBsZW5ndGggPSBzaGlwLmxlbmd0aDtcbiAgICBjb25zdCBzdGFydFBvcyA9IHNoaXAucG9zO1xuICAgIGNvbnN0IG9yaWUgPSBzaGlwLm9yaWU7XG5cbiAgICBsZXQgdG9PY2N1cHlDZWxscyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGNlbGwgPSB1bmRlZmluZWQ7XG4gICAgICBpZiAob3JpZSA9PT0gXCJob3Jpem9udGFsXCIpIHtcbiAgICAgICAgaWYgKHN0YXJ0UG9zLnggKyBpIDwgc2lkZUxlbmd0aCkge1xuICAgICAgICAgIGNlbGwgPSBnZXRDZWxsKHtcbiAgICAgICAgICAgIHg6IHN0YXJ0UG9zLnggKyBpLFxuICAgICAgICAgICAgeTogc3RhcnRQb3MueSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChvcmllID09PSBcInZlcnRpY2FsXCIpIHtcbiAgICAgICAgaWYgKHN0YXJ0UG9zLnkgKyBpIDwgc2lkZUxlbmd0aCkge1xuICAgICAgICAgIGNlbGwgPSBnZXRDZWxsKHtcbiAgICAgICAgICAgIHg6IHN0YXJ0UG9zLngsXG4gICAgICAgICAgICB5OiBzdGFydFBvcy55ICsgaSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdG9PY2N1cHlDZWxscy5wdXNoKFtjZWxsLCBpXSk7XG4gICAgfVxuXG4gICAgLy8gY29uc29sZS5sb2coc2hpcCk7XG4gICAgLy8gY29uc29sZS5sb2codG9PY2N1cHlDZWxscyk7XG5cbiAgICBjb25zdCBhcmVMZWdhbFBsYWNlbWVudHMgPSB0b09jY3VweUNlbGxzLmV2ZXJ5KChjZWxsKSA9PiB7XG4gICAgICBpZiAoY2VsbFswXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChjZWxsWzBdLmhhc1NoaXAoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGlmIChhcmVMZWdhbFBsYWNlbWVudHMpIHtcbiAgICAgIHRvT2NjdXB5Q2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICBjZWxsWzBdLmFzc2lnblNoaXAoc2hpcCwgY2VsbFsxXSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBhcmVBbGxTaGlwc1N1bmsoKSB7XG4gICAgcmV0dXJuIHJldHMuc2hpcHNcbiAgICAgIC5tYXAoKHNoaXApID0+IHtcbiAgICAgICAgcmV0dXJuIHNoaXAuaXNTdW5rKCk7XG4gICAgICB9KVxuICAgICAgLmV2ZXJ5KChib29sVmFsdWUpID0+IHtcbiAgICAgICAgcmV0dXJuIGJvb2xWYWx1ZSA9PT0gdHJ1ZTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q2VsbChwb3MpIHtcbiAgICByZXR1cm4gcmV0cy5ib2FyZFtwb3MueV1bcG9zLnhdO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0U2hpcChsZW5ndGgsIHBvcywgb3JpZSkge1xuICAgIGNvbnN0IHNoaXAgPSBTaGlwKGxlbmd0aCwgcG9zLCBvcmllKTtcbiAgICBjb25zdCBpc1N1Y2Nlc3MgPSBfYXNzaWduU2hpcENlbGxzKHNoaXApO1xuICAgIGlmIChpc1N1Y2Nlc3MpIHtcbiAgICAgIHJldHMuc2hpcHMucHVzaChzaGlwKTtcbiAgICB9XG4gICAgcmV0dXJuIGlzU3VjY2VzcztcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYWNlU2hpcFJhbmRvbWx5KHNoaXBMZW5ndGgpIHtcbiAgICB3aGlsZSh0cnVlKSB7XG4gICAgICBjb25zdCByYW5kT3JpZSA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSkgPyAnaG9yaXpvbnRhbCcgOiAndmVydGljYWwnO1xuICAgICAgY29uc3QgcmFuZFggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzaWRlTGVuZ3RoKTtcbiAgICAgIGNvbnN0IHJhbmRZID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2lkZUxlbmd0aCk7XG5cbiAgICAgIGNvbnN0IGlzU3VjY2VzcyA9IHJldHMuc2V0U2hpcChzaGlwTGVuZ3RoLCB7eDogcmFuZFgsIHk6IHJhbmRZfSwgcmFuZE9yaWUpO1xuICAgICAgaWYoaXNTdWNjZXNzKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlY2lldmVBdHRhY2socG9zKSB7XG4gICAgY29uc3QgY2VsbCA9IGdldENlbGwoe1xuICAgICAgeDogcG9zLngsXG4gICAgICB5OiBwb3MueSxcbiAgICB9KTtcbiAgICBpZiAoY2VsbC5oYXNTaGlwKCkpIHtcbiAgICAgIGNvbnN0IHNoaXAgPSBjZWxsLnNoaXA7XG4gICAgICBjb25zdCBzaGlwSW5kZXggPSBjZWxsLnNoaXBJbmRleDtcbiAgICAgIHNoaXAuaGl0KHNoaXBJbmRleCk7XG5cbiAgICAgIGlmIChzaGlwLmlzU3VuaygpKSB7XG4gICAgICAgIGRpc3BsYXlDb250cm9sbGVyLmVkaXRPdXRwdXRUZXh0KGAke3NoaXAubGVuZ3RofS1DZWxsIExvbmcgU2hpcCBTdW5rYClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0cy5taXNzZWQucHVzaChwb3MpO1xuICAgIH1cbiAgICBjZWxsLmlzQ2hlY2tlZCA9IHRydWU7XG5cbiAgICByZXR1cm4gYXJlQWxsU2hpcHNTdW5rKClcbiAgfVxuXG4gIGZ1bmN0aW9uIHdhc0NlbGxDaGVja2VkKHBvcykge1xuICAgIHJldHVybiBnZXRDZWxsKHBvcykuaXNDaGVja2VkID09PSB0cnVlO1xuICB9XG5cbiAgY29uc3QgcmV0cyA9IHtcbiAgICBzaWRlTGVuZ3RoLFxuICAgIGJvYXJkLFxuICAgIHNoaXBzLFxuICAgIG1pc3NlZCxcblxuICAgIGdldENlbGwsXG4gICAgc2V0U2hpcCxcbiAgICBhcmVBbGxTaGlwc1N1bmssXG4gICAgcGxhY2VTaGlwUmFuZG9tbHksXG4gICAgcmVjaWV2ZUF0dGFjayxcbiAgICB3YXNDZWxsQ2hlY2tlZCxcbiAgfTtcblxuICByZXR1cm4gcmV0cztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdhbWVib2FyZDtcbiIsImNvbnN0IFNoaXAgPSAobGVuZ3RoLCBwb3MsIG9yaWUpID0+IHtcbiAgY29uc3QgY2VsbHMgPSBBcnJheShsZW5ndGgpLmZpbGwodHJ1ZSk7XG5cbiAgZnVuY3Rpb24gaGl0IChjZWxsSW5kZXgpIHtcbiAgICByZXRzLmNlbGxzW2NlbGxJbmRleF0gPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzU3VuaygpIHtcbiAgICByZXR1cm4gcmV0cy5jZWxscy5ldmVyeShjZWxsID0+IChjZWxsID09IGZhbHNlKSk7XG4gIH1cblxuICBjb25zdCByZXRzID0ge1xuICAgIGxlbmd0aCxcbiAgICBjZWxscyxcbiAgICBwb3MsXG4gICAgb3JpZSxcblxuICAgIGhpdCxcbiAgICBpc1N1bmssXG4gIH07XG5cbiAgcmV0dXJuIHJldHM7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTaGlwOyIsImltcG9ydCBHYW1lYm9hcmQgZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5cbmNvbnN0IGdhbWVib2FyZFNpemUgPSAxMFxuXG5jb25zdCBQbGF5ZXIgPSAobmFtZSwgaXNBST1mYWxzZSkgPT4ge1xuICBsZXQgaXNXaW5uZXIgPSBmYWxzZTtcbiAgY29uc3QgZ2FtZWJvYXJkID0gR2FtZWJvYXJkKGdhbWVib2FyZFNpemUpO1xuXG4gIGZ1bmN0aW9uIGF0dGFja1JhbmRvbUNlbGwob3Bwb25lbnQpIHtcbiAgICBjb25zdCBsZW5ndGggPSBvcHBvbmVudC5nYW1lYm9hcmQuYm9hcmQubGVuZ3RoO1xuXG4gICAgbGV0IGF0dGFja1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICB3aGlsZSghYXR0YWNrU3VjY2Vzcykge1xuICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxlbmd0aCk7XG4gICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbGVuZ3RoKTtcblxuICAgICAgY29uc3QgcG9zID0ge3gsIHl9O1xuICAgICAgYXR0YWNrU3VjY2VzcyA9IGF0dGFja09wcG9uZW50KG9wcG9uZW50LCBwb3MpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJldHVybnMgdHJ1ZSBpZiB0YXJnZXQgcG9zaXRpb24gaXMgYSB2YWxpZCBjZWxsXG4gIC8vIFJldHVybnMgZmFsc2Ugb3RoZXJ3aXNlXG4gIGZ1bmN0aW9uIGF0dGFja09wcG9uZW50KG9wcG9uZW50LCBwb3MpIHtcbiAgICBpZighb3Bwb25lbnQuZ2FtZWJvYXJkLndhc0NlbGxDaGVja2VkKHBvcykpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG9wcG9uZW50LmdhbWVib2FyZC5yZWNpZXZlQXR0YWNrKHBvcyk7XG4gICAgICBpZihyZXN1bHQpIHtcbiAgICAgICAgc2V0V2lubmVyKClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFdpbm5lcigpIHtcbiAgICByZXRzLmlzV2lubmVyID0gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0IHJldHMgPSB7XG4gICAgbmFtZSxcbiAgICBpc0FJLFxuICAgIGdhbWVib2FyZCxcbiAgICBhdHRhY2tPcHBvbmVudCxcbiAgICBpc1dpbm5lcixcbiAgfTtcblxuICBpZiAoaXNBSSkge1xuICAgIHJldHMuYXR0YWNrUmFuZG9tQ2VsbCA9IGF0dGFja1JhbmRvbUNlbGw7XG4gIH1cblxuICByZXR1cm4gcmV0cztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFBsYXllcjsiLCJpbXBvcnQgZGlzcGxheUNvbnRyb2xsZXIgZnJvbSBcIi4vZGlzcGxheUNvbnRyb2xsZXJcIjtcbmltcG9ydCBnYW1lRXZlbnRzIGZyb20gXCIuL2dhbWVFdmVudHNcIjtcbmltcG9ydCBQbGF5ZXIgZnJvbSBcIi4vZ2FtZU9iamVjdHMvcGxheWVyXCI7XG5cbmNvbnN0IGdhbWVDb250cm9sbGVyID0gKCgpID0+IHtcbiAgZnVuY3Rpb24gc2V0dXBHYW1lKCkge1xuICAgIGNvbnN0IGh1bWFuUGxheWVyID0gUGxheWVyKCdVc2VyJyk7XG4gICAgY29uc3QgY29tcHV0ZXJQbGF5ZXIgPSBQbGF5ZXIoJ0NvbXB1dGVyJywgdHJ1ZSk7XG5cbiAgICBkaXNwbGF5Q29udHJvbGxlci5yZW5kZXJQbGF5ZXJHYW1lYm9hcmQoaHVtYW5QbGF5ZXIuZ2FtZWJvYXJkKTtcbiAgICBkaXNwbGF5Q29udHJvbGxlci5yZW5kZXJPcHBvbmVudEdhbWVib2FyZChjb21wdXRlclBsYXllci5nYW1lYm9hcmQpO1xuXG4gICAgX2JlZ2luU2hpcFNldHVwUGhhc2UoaHVtYW5QbGF5ZXIsIGNvbXB1dGVyUGxheWVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9iZWdpblNoaXBTZXR1cFBoYXNlKGh1bWFuUGxheWVyLCBjb21wdXRlclBsYXllcikge1xuICAgIGdhbWVFdmVudHMuYXR0YWNoQWRkU2hpcEV2ZW50cyhodW1hblBsYXllciwgY29tcHV0ZXJQbGF5ZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gYmVnaW5BdHRhY2tQaGFzZShodW1hblBsYXllciwgY29tcHV0ZXJQbGF5ZXIpIHtcbiAgICBnYW1lRXZlbnRzLmF0dGFjaEF0dGFja0V2ZW50cyhodW1hblBsYXllciwgY29tcHV0ZXJQbGF5ZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29tcGxldGVHYW1lVHVybihwbGF5ZXIsIG9wcG9uZW50KSB7XG4gICAgb3Bwb25lbnQuYXR0YWNrUmFuZG9tQ2VsbChwbGF5ZXIpO1xuICAgIGRpc3BsYXlDb250cm9sbGVyLnJlbmRlclBsYXllckdhbWVib2FyZChwbGF5ZXIuZ2FtZWJvYXJkKTtcbiAgICBkaXNwbGF5Q29udHJvbGxlci5yZW5kZXJPcHBvbmVudEdhbWVib2FyZChvcHBvbmVudC5nYW1lYm9hcmQpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29tcGxldGVQbGFjZW1lbnRUdXJuKHBsYXllciwgb3Bwb25lbnQsIGxlbmd0aCkge1xuICAgIG9wcG9uZW50LmdhbWVib2FyZC5wbGFjZVNoaXBSYW5kb21seShsZW5ndGgpO1xuICAgIGRpc3BsYXlDb250cm9sbGVyLnJlbmRlclBsYXllckdhbWVib2FyZChwbGF5ZXIuZ2FtZWJvYXJkKTtcbiAgICBkaXNwbGF5Q29udHJvbGxlci5yZW5kZXJPcHBvbmVudEdhbWVib2FyZChvcHBvbmVudC5nYW1lYm9hcmQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVjbGFyZVdpbm5lcih3aW5uaW5nUGxheWVyKSB7XG4gICAgZ2FtZUV2ZW50cy5jbGVhckdyaWRFdmVudHMoKTtcbiAgICBkaXNwbGF5Q29udHJvbGxlci5lZGl0T3V0cHV0VGV4dChgQWxsIHNoaXBzIHN1bmssICR7d2lubmluZ1BsYXllci5uYW1lfSB3aW5zIWApXG4gIH1cblxuICBjb25zdCByZXRzID0ge1xuICAgIHNldHVwR2FtZSxcbiAgICBiZWdpbkF0dGFja1BoYXNlLFxuICAgIGNvbXBsZXRlUGxhY2VtZW50VHVybixcbiAgICBjb21wbGV0ZUdhbWVUdXJuLFxuICAgIGRlY2xhcmVXaW5uZXIsXG4gIH07XG5cbiAgcmV0dXJuIHJldHM7XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBnYW1lQ29udHJvbGxlcjsiLCJpbXBvcnQgZ2FtZUNvbnRyb2xsZXIgZnJvbSBcIi4vZ2FtZUNvbnRyb2xsZXJcIjtcblxuZ2FtZUNvbnRyb2xsZXIuc2V0dXBHYW1lKCk7Il0sIm5hbWVzIjpbImdhbWVib2FyZCIsImJvYXJkR3JpZCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInJvdyIsImJvYXJkIiwiY2VsbCIsImJvYXJkQ2VsbCIsImhhc1NoaXAiLCJpc0NoZWNrZWQiLCJhcHBlbmRDaGlsZCIsIm91dHB1dFRleHQiLCJxdWVyeVNlbGVjdG9yIiwiX2NsZWFyRGlzcGxheUdyaWQiLCJncmlkIiwidGV4dENvbnRlbnQiLCJyZW5kZXJQbGF5ZXJHYW1lYm9hcmQiLCJwbGF5ZXJEaXNwbGF5R3JpZCIsImRpc3BsYXlHcmlkIiwicmVuZGVyT3Bwb25lbnRHYW1lYm9hcmQiLCJvcHBvbmVudERpc3BsYXlHcmlkIiwiZWRpdE91dHB1dFRleHQiLCJuZXdUZXh0IiwiZ2FtZUV2ZW50cyIsInJvdGF0ZUJ0biIsIm9yaWUiLCJzaGlwTGVuZ3RocyIsImNsZWFyR3JpZEV2ZW50cyIsIl9jbGVhckFsbEVsZW1lbnRFdmVudHMiLCJlbGVtZW50Iiwib2xkRWxlbWVudCIsImNsZWFyZWRFbGVtZW50IiwiY2xvbmVOb2RlIiwicGFyZW50Tm9kZSIsInJlcGxhY2VDaGlsZCIsIl9zZXRTaGlwSGlnaGxpZ2h0IiwiZSIsInBsYXllciIsImhpZ2hsaWdodGVkIiwidGFyZ2V0IiwiY29udGFpbnMiLCJsZW5ndGgiLCJzaXplIiwic2lkZUxlbmd0aCIsImdyaWRDZWxsTGlzdCIsImNoaWxkcmVuIiwidGFyZ2V0SW5kZXgiLCJBcnJheSIsImZyb20iLCJpbmRleE9mIiwidG9IaWdobGlnaHRDZWxscyIsImkiLCJncmlkQ2VsbEluZGV4IiwicHVzaCIsIk1hdGgiLCJmbG9vciIsImZvckVhY2giLCJyZW1vdmUiLCJfZ2V0VGFyZ2V0UG9zIiwieCIsInkiLCJfc2V0QXR0YWNrSGlnaGxpZ2h0IiwiX3JvdGF0ZU5leHRTaGlwIiwicmV0cyIsImF0dGFjaEFkZFNoaXBFdmVudHMiLCJodW1hblBsYXllciIsIm9wcG9uZW50UGxheWVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9wcG9uZW50IiwicGxheWVyR2FtZWJvYXJkIiwidGFyZ2V0UG9zIiwic2V0U2hpcCIsInNoaWZ0IiwiX2FkZFNoaXBUb0dyaWQiLCJhdHRhY2hBdHRhY2tFdmVudHMiLCJhdHRhY2tPcHBvbmVudCIsImlzV2lubmVyIiwiX2NoZWNrRm9yV2lubmVyIiwiX2F0dGFja09wcG9uZW50Q2VsbE9uR3JpZCIsIkNlbGwiLCJzaGlwIiwic2hpcEluZGV4IiwiYXNzaWduU2hpcCIsImluZGV4IiwiciIsImMiLCJfY3JlYXRlQm9hcmRHcmlkIiwiYXJlQWxsU2hpcHNTdW5rIiwic2hpcHMiLCJtYXAiLCJpc1N1bmsiLCJldmVyeSIsImJvb2xWYWx1ZSIsImdldENlbGwiLCJwb3MiLCJtaXNzZWQiLCJjZWxscyIsImZpbGwiLCJoaXQiLCJjZWxsSW5kZXgiLCJpc1N1Y2Nlc3MiLCJzdGFydFBvcyIsInRvT2NjdXB5Q2VsbHMiLCJ1bmRlZmluZWQiLCJfYXNzaWduU2hpcENlbGxzIiwicGxhY2VTaGlwUmFuZG9tbHkiLCJzaGlwTGVuZ3RoIiwicmFuZE9yaWUiLCJyYW5kb20iLCJyYW5kWCIsInJhbmRZIiwicmVjaWV2ZUF0dGFjayIsIndhc0NlbGxDaGVja2VkIiwibmFtZSIsImlzQUkiLCJhdHRhY2tSYW5kb21DZWxsIiwiYXR0YWNrU3VjY2VzcyIsInNldHVwR2FtZSIsImNvbXB1dGVyUGxheWVyIiwiX2JlZ2luU2hpcFNldHVwUGhhc2UiLCJiZWdpbkF0dGFja1BoYXNlIiwiY29tcGxldGVQbGFjZW1lbnRUdXJuIiwiY29tcGxldGVHYW1lVHVybiIsImRlY2xhcmVXaW5uZXIiLCJ3aW5uaW5nUGxheWVyIl0sInNvdXJjZVJvb3QiOiIifQ==